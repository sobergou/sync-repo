name: sync git-repo auto
on:
  schedule:
    - cron: '0 18 14 * *'  # 每月 北京时间 15日 02:00（UTC 14日 18:00）
  workflow_dispatch:

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
      - name: clone git-repo
        run: |
          git clone https://github.com/GerritCodeReview/git-repo
          cd git-repo
          git fetch --all
          git remote add gitee https://oauth2:${{ secrets.GITEE_TOKEN }}@gitee.com/sobergou/git-repo.git
        
      - name: push gitee
        run: |
          cd git-repo
          git push --force --all gitee
          git push --force --tags gitee
